{{ define "main" }}
    <header>
        <h3 class="section-title">{{ T "list.section" }}</h3>

        <div class="section-card">
            <div class="section-details">
                <h3 class="section-count">{{ T "list.page" (len .Pages) }}</h3>
                <h1 class="section-term">{{ .Title }}</h1>
            </div>
        </div>
    </header>

    {{/* ê³„ì¸µ êµ¬ì¡°ë¡œ ì¹´í…Œê³ ë¦¬ í‘œì‹œ */}}
    <section class="hierarchical-categories">
        {{/* ë©”ì¸ ì¹´í…Œê³ ë¦¬ë“¤ë§Œ ë¨¼ì € ìˆ˜ì§‘ */}}
        {{ $mainCats := slice }}
        {{ range .Site.Taxonomies.categories }}
            {{ $mainCats = $mainCats | append .Page.Title }}
        {{ end }}
        {{ $mainCats = uniq $mainCats | sort }}

        {{ range $mainName := $mainCats }}
            <details class="category-group" open>
                <summary class="main-cat">
                    <span>ğŸ“ {{ $mainName }}</span>
                </summary>
                <div class="sub-cats">
                    {{/* ì´ ë©”ì¸ ì¹´í…Œê³ ë¦¬ì— ì†í•˜ëŠ” ì„œë¸Œë“¤ ì°¾ê¸° */}}
                    {{ range $.Site.Taxonomies.categories }}
                        {{ if eq .Page.Title $mainName }}
                            <a href="{{ .Page.RelPermalink }}" class="sub-cat-link">
                                <span>{{ .Page.Title }}</span>
                                <span class="count">({{ .Count }})</span>
                            </a>
                        {{ end }}
                    {{ end }}
                </div>
            </details>
        {{ end }}
    </section>

    {{ partialCached "footer/footer" . }}
{{ end }}

{{ define "right-sidebar" }}
    {{ partial "sidebar/right.html" (dict "Context" . "Scope" "homepage") }}
{{ end }}

<style>
.hierarchical-categories {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.category-group {
    background: var(--card-background);
    border-radius: var(--card-border-radius);
    padding: 1.5rem;
    box-shadow: var(--shadow-l1);
}

.main-cat {
    font-size: 1.3rem;
    font-weight: 600;
    cursor: pointer;
    list-style: none;
}

.main-cat::-webkit-details-marker {
    display: none;
}

.sub-cats {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-top: 1rem;
    padding-left: 2rem;
}

.sub-cat-link {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    background: var(--body-background);
    border-radius: 6px;
    text-decoration: none;
    transition: all 0.2s ease;
}

.sub-cat-link:hover {
    transform: translateX(4px);
    border-left: 3px solid var(--accent-color);
}

.count {
    color: var(--card-text-color-secondary);
}
</style>
